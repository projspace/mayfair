<?
	error_reporting(E_ALL);
	ini_set('display_errors','1');
	include("../lib/cfg_Config.php");
	include("../lib/lib_WSTax.php");
	
	$ws_tax = new WSTax($config);
	$prods = array();
	$prods[] = array(
		'id' => 90
		,'sales_amount' => 52
		,'unit_price' => 52
		,'upc_code' => '886253155687'
		,'quantity' => 1
	);
	$delivery = array(
		'street' => '25 Housel Avenueus'
		,'city' => 'Lyndonvilleus'
		,'postcode' => '14098123'
		,'country' => 'Newus Yorkus'
	);

	$billing = array(
		'name' => 'development testing'
	);
	var_dump($ws_tax->postInvoice(array('time'=>time(),'invoice_number'=>$config['companyshort'].'123456789'),$prods,$delivery,$billing));
	
	exit;
	$all = array_unique(array('99163','78504','11219','94123','64063','72758','17013','76092','90265','11215','11516','17043','94546','19604','19606','02482','48912','45662','78412','44035','06824','00659','97035','600521','89423','70560','83402','72703','30223','39564','77627','02347','19426','93304','15090','06001','44087','33060','45244','60010','60201','46635','92660','83001','90732','10514','90292','48602','08742','79605','70115','70810','70115','76308','73401','90631','56560','98516','92024','35209','11040','95003','32606','17603','98020','60045','93010','90096','08690','77338','07930','11788','22031','54301','75231','21286','79424','71203','80917','80109','27858','26062','30080','30305','27948','31410','06850','33076','08053','67208','49424','33778','90212','10014','78412','19147','48104','30318','84108','94941','48322','55105','75202','07020','07960','07632','11204','92131','02721','90266','11235','93117','01803','77598','45013','25302','07647','84020','65807','14420','14618','14221','30519','39180','33175','90404','32065','46545','15317','12603','53115','38117','21209','15401','48362','85257','92627','37408','19107','06830','11968','28403','71913','93291','90212','91206','19073','90048','90266','78041','45459','72703','78736','08648','91020','94510','77057','02906','66604','71602','94115','78624','30306','84601','79707','74137','92128','55901','40207','35801','33040','30257','31204','48375','34711','46952','45503','60093','02747','85226','85226','85226','85206','85202','14850','05701','99503','93067','11937','10312','19103','48864','80302','77373','11375','10036','19810','63144','95030','33480','74701','78749','92404','47303','10036','11769','70601','33076','20854','11231','94123','10506','11223','29206','29708','28117','33133','70471','83460','11932','92395','90266','91030','91303','98112','01201','94040','11570','91942','94401','92025','92054','10023','02481','44124','75209','78759','10021','10128','95816','92122','95628','90272','10512','70002','92115','94941','27410','24551','75093','19401','92708','10543','07670','75501','77630','07481','37379','08628','30214','31520','30060','30096','98105','62226','10583','55118','28211','08736','98188','53562','98368','80206','77069','19093','84102','94025','90049','02809','91355','01230','07030','42303','20170','60148','73116','33334','27106','07631','37388','07624','92660','94925','11211','02889','30157','07726','64055','94596','11223','38018','38801','94803','77429','77339','77450','53003','10017','38117','08558','10024','98225','73120','53959','76543','95404','40503','30338','77904','11218','34231','75028','01824','54911','97504','80031','30329','72704','45069','07450','95350','19808','12508','77429','19560','33618','32174','50021','80126','02338','29150','49684','93454','98003','19901','06840','62025','02062','36695','46143','79603','32119','33426','27514','79903','80501','73099','68046','30030','77706','02840','31520','24179','27616','68701','74401','28403','28504','90049','77304','39402','30328','30075','81503','95401','84057','32955','41017','60914','19301','57105','84770','30066','60194','35210','70458','45322','11787','52241','52402','23320','33156','02140','30126','52241','94901','93401','70071','36606','21015','79705','76110','16602','68114','68506','64118','36203','17361','77901','73069','70075','21921','90034','82414','13413','84057','46410','30605','21146','92677','33990','63366','43214','19047','62002','01742','92649','97005','04938','32765','64801','06040','62305','21801','73501','37076','71291','35055','84604','48152','92105','80112','32712','32277','60014','60048','60194','76502','34470','78645','03246','94025','28659','28303','49009','82001','44870','85704','46383','54913','01420','23185','06512','48104','30269','92656','92612','78746','33463','15905','06109','89445','78734','76017','97401','07646','26505','03060','15601','43055','37701','78731','02760','02382','48732','02780','02460','70737','28023','73701','28801','02601','44224','43551','17036','06517','08869','37923','22405','01757','02481','93063','48060','06518','33165','37343','30904','68502','98033','16509','39466','27284','75237','03102','77089','14624','33161','48187','30132','04347','95035','44718','84092','85260','43081','07677','70461','48195','08816','64015','10075','33015','33907','33174','06062','94521','92614','76205','75206','03801','78258','91604','06820','94558','53704','36331','35501','32713','91105','59102','97267','85224','85032','85308','19341','66212','17331','88220','07834','11803','76205','11501','11219','91710','29601','45242','75034','23229','79928','49684','90720','18201','39211','32504','32569','32541','08234','85201','77005','78232','78230','78218','78681','65804','78130','20659','30253','19038','70043','68803','79912','92780','12010','74820','11225','07642','17566','10128','90048','07043','33432','72207','76092','49684','23221','22902','92105','99202','18944','75077','48017','47901','47905','11801','25443','80134','08753','94598','94588','70005','00725','11229','10707','95945','90403','78613','54650','27513','07006','70806','85014','98104','74804','10465','94513','64133','90505','90277','70360','93534','45211','11978','55113','11219','48317','77070','48080','01056','98277','92234','70506','04101','90291','11223','32461','29550','90004','33304','34994','83301','61614','94549','07024','21701','72212','27609','66604','30078','14224','19046','11206','11021','44070','10019','90266','84109','45895','11501','10952','60614','33458','60610','18017','17702','77025','85018','30318','93704','02169','78704','74120','40701','36608','10065','70438','34787','92782','08003','07072','31605','89014','00926','72903','70506','47715','34102','75069','33924','32413','91107','36421','10883','98902','78665','84003','51101','48423','75040','11753','11211','11977','01867','83001','70508','97031','45429','06804','62521','55105','06716','92660','85283','11024','11231','10024','75901','61820','36561','90049','95476','14304','93101','80002','75229','30582','32303','63122','08701','48386','10583','20110','93921','94115','30165','77006','64114','92651','90048','33467','75205','22902','11209','85716','79912','10510','45044','14534','30080','95003','35213','08701','56903','70062','07442','29579','94301','33180','01220','22801','93612','07866','08540','14580','90272','08822','37064','77098','39120','95993','19968','07751','07039','39157','33316','44130','65804','07652','23455','06460','19103','06877','35758','55110','89014','89502','29550','75024','32257','53916','60004','91103','76010','20737','94002','95677','56425','02375','13421','73044','91403','91505','34609','95926','60563','60559','92025','95014','73120','23834','19107','32963','02482','95037','72032','87505','49503','74137','19040','93711','78757','97333','10954','08402','15301','11211','70501','70502','30080','33156','76244','46220','46062','40220','46220','73401','90048','68118','68118','02118','11215','28209','31406','31545','19103','52240','60605','79761','36280','06897','53066','54603','45245','06488','11729','46706','02917','57401','91108','55410','73013','38821','27605','35209','55109','89014','84321','35630','64113','94501','94306','78216','77081','28227','30116','39157','10021','97212','39567','33186','20910','02116','11223','77520','36301','73034','11219','21401','70345','97214','59715','84070','83001','05495','37064','53225','06830','11225','29205','08701','11219','11211','53211','39305','11211','02360','11787','32669','60618','11225','82601','60525','37072','91741','90277','90304','06880','95746','19348','77056','16101','48620','77706','38363','90028','34236','11050','83642','10707','34109','48038','11215','70058','48124','80631','32405','36420','27605','60611','63005','66044','98802','98802','25701','20118','10028','60468','70301','32501','32223','32216','90266','07631','39573','54660','34102','50131','01027','23321','83704','83704','78212','23451','02820','78501','32935','92101','95482','30306','02804','84321','48307','02633','60611','10543','38506','91723','60611','77056','70005','85053','29150','29409','11204','10021','78557','53716','10019','90504','27701','28205','75093','60604','57701','19026','29063','07666','78705','49506','49512','02114','10547','94115','60622','97205','31707','90014','56401','08002','92260','11572','19072','19342','90212','10011','24540','32250','94301','34108','27127','23221','83702','80220','10573','87110','60068','11366','33480','10036','90621','92657','32811','39211','19003','06790','11222','55435','11230','78746','70809','46803','28054','59802','20854','33160','71201','03784','74464','10016','33617','01960','10306','28025','40741','11797','84129','11575','84092','43606','43017','60643','07043','92620','78552','70806','76308','11559','84098','17557','91301','11724','84010','92660','68701','10306','94107','80120','60657','88220','88220','10309','19002','15131','14075','70403','90272','08701','43240','98087','11104','16801','11725','24060','11201','60614','70605','10538','33139','11743','07723','37215','11507','93526','23112','83201','62234','39211','80302','21231','90402','02467','97209','77706','57108','75209','07039','21046','83318','60435','77566','32550','80524','32773','29483','06902','20707','95123','35406','07675','76904','07631','10014','90049','22301','77005','84403','10028','79109','92660','72712','91030','12866','38804','59105','10021','20852','10583','90703','44902','33131','39507','50010','35640','80302','53405','73120','19103','08542','07731','94609','70808','14468','73130','02474','11210','91101','94105','94618','93454','08221','75023','75228','74023','12866','11219','21202','20814','20007','91108','29605','11205','32211','32960','95437','94904','13790','07030','33434','30338','49015','93923','60035','92260','95030','94117','88240','10025','08701','11211','92121','10019','66209','55408','07651','11204','10573','63129','08701','05451','11109','34236','03301','73170','73116','29803','71106','92660','08701','20007','11780','98273','13152','01907','91351','07701','10028','10506','11211','35213','49506','11548','92102','29306','29607','11219','10952','84604','41017','07090','94925','96001','79707','11201','27612','10010','91761','35801','37027','37215','98370','33611','75067','80525','61701','06468','44310','28327','28387','98501','95207','46808','78041','89102','33013','60462','48706','10504','20639','44212','77546','15017','05401','55305','71446','29501','44512','11772','11223','85251','55125','55337','96826','75839','10013','19446','90501','92590','92025','01085','92352','33166','48034','92503','88011','84025','07940','28472','92590','04843','30458','29732','55447','95370','34683','93702','90069','19138','39110','92014','94506','11963','53589','72756','60048','80218','21601','10023','10023','17701','97701','68901','75074','00921','00968','00680','00680','00983','00983','00731','00731','02139','76541','11204','23606','92014','15668','17043','11223','50265','91101','12401','20735','95521','60045','32502','44442','17404','65804','15210','06880','94556','10023','08542','34453','53029','60004','48507','03079','94526','32082','29206','94618','92652','28207','70817','10013','28405','07042','53005','93940','19053','27518','48329','92260','05452','74114','45833','71603','40741','32789','73069','94611','33408','29206','29407','13208','11548','61822','61822','92028','60178','35071','35071','35906','34205','37659','21742','21740','37212','03842','32963','37203','94123','80302','11548','11727','32218','07731','32765','75069','51503','70115','73118','84094','38133','33014','89145','18940','95128','19382','75090','48161','07631','15767','90026','10952','75201','98249','22903','32205','76116','63124','81620','90601','90025','10011','01501','53719','78611','06870','44512','11204','10014','10014','11204','08542'));
	$db = array_unique(array('10013','94117','36421','36420','35209','35210','35213','35213','35055','36301','36331','35630','35071','35640','35209','35801','35501','35758','36606','36695','36608','36561','36203','35906','35406','36280','72712','72032','72703','72703','72903','71913','72704','72207','71603','72756','71602','85226','85226','85226','85224','85226','85308','85201','85032','85014','85018','85053','85257','85260','85251','85283','85704','85716','91301','94501','92656','95003','95003','93304','94002','94510','90212','94513','90621','91505','93010','91303','91303','93921','93923','94546','92234','90703','95926','91710','93612','94925','94925','92627','91723','95014','94521','93526','94506','94526','92014','94803','92024','92025','95628','92028','95437','92708','93704','93702','93117','95746','95945','94904','90028','90028','92649','90304','92620','92614','92620','90631','94549','92652','92651','92352','93534','90720','90049','91604','90049','90048','90004','90049','90048','90048','90014','90212','90049','90034','90026','95030','95030','90266','90266','90266','90266','90266','90292','94025','94025','94941','94941','95035','95350','93940','91020','95037','94558','92660','92660','92660','92660','92660','92660','94609','94618','94611','94556','90272','90272','90272','92260','92260','94301','94306','94301','91105','91107','91103','91101','91101','94588','96001','92503','95677','91030','95816','92404','92131','92128','92115','92122','92105','92105','92101','92121','92102','94123','94115','94123','94115','94115','94105','94117','90732','94901','93101','91351','93454','90404','90402','95404','95401','93063','95476','95370','91030','95207','91604','93067','92590','90505','90504','90501','92780','92782','95482','95482','91355','90291','93291','94596','90096','90048','90601','95993','80002','81620','80302','80302','80302','80302','80917','80206','80220','80218','80112','80525','81503','80631','80126','80120','80501','80134','80031','20007','20007','19901','19968','19810','33180','33160','34205','33990','33924','34711','33133','33076','32713','33304','33316','33334','33907','33467','33013','33014','34453','32277','32257','32211','32218','32205','32250','33458','33040','33463','33778','32569','32935','33174','33156','33015','33156','33186','33139','33131','33166','33014','34109','34102','34108','32669','33161','32811','32174','32765','33480','33480','33408','34683','33076','32501','33060','32082','32461','32461','32550','32773','34231','34236','34236','34236','34609','34994','32303','33611','33617','32963','32960','32963','32789','31707','30605','30305','30318','30306','30328','30329','30318','30306','30904','31520','30519','30116','30157','30132','30030','30096','30338','30338','30214','31545','31204','30066','30253','30257','30257','30165','30075','31410','31406','30080','30080','30078','30458','31605','50010','52402','52241','52241','51503','51101','50265','83704','83702','83318','83402','83642','62002','60004','60004','62226','61701','61820','61822','60610','60614','60605','60618','60611','60611','60611','60604','60622','60643','60657','60614','60611','62234','60525','62521','62025','60201','60035','600521','60045','60045','60048','60148','60462','60462','60068','61614','60468','62305','60194','60178','60559','60093','46706','47715','46220','46220','47901','46410','46545','66044','66212','41017','41017','40503','40741','40741','40207','42303','70810','70809','70806','70808','70817','70501','70508','70601','70605','70605','71446','70471','70005','70005','71203','71201','70075','70115','70115','70115','70461','71291','21401','21209','21231','21202','20814','20735','21046','21601','21921','21742','20639','20659','20854','20737','20852','21146','20910','21286','48104','48104','49015','48706','48017','48038','48423','48124','48732','48507','49506','49506','49424','49009','48620','49512','48362','48912','48161','48375','48864','48060','48307','48602','48317','48034','48195','48080','49684','49684','48329','48322','48386','56401','56401','55337','55410','55109','55408','53003','55447','55901','55113','55105','55105','56903','55118','55110','64015','63005','64055','64055','64801','64118','64114','64113','63122','64063','63129','63366','64133','65807','65804','65804','65804','63144','63124','38821','39507','39402','39211','39211','39211','39110','39120','39567','39573','39466','39157','39180','59102','59105','59715','59802','28801','28327','27513','27518','27518','27514','28211','28209','28227','28205','28207','28023','28025','27701','28303','28054','27410','27858','27948','28504','28117','28659','27616','27605','27605','27612','28472','28403','28403','28405','27127','27106','68803','68901','68506','68502','68701','68701','68118','87110','88220','88220','88240','88011','89014','89014','89014','89102','89145','89423','11507','11507','12010','10504','10506','10506','10510','11932','10465','11231','11219','11222','11215','11235','11204','11223','11211','11223','11218','11219','11225','11229','11223','11223','11206','11231','11209','11215','11223','11219','11219','11211','11211','11225','11215','11204','11230','11201','11219','11210','11219','11204','11211','11211','11219','11201','11204','11223','11204','11204','11516','10514','11724','11725','11727','11729','11937','11772','11375','11366','11021','11024','11548','11548','11548','14075','11801','14468','11743','11743','14850','11753','11753','13790','12401','10538','10538','11559','11109','10543','10543','11501','11501','10547','10952','10952','10952','10954','10021','10065','10014','10023','10017','10024','10128','10019','10065','10019','10024','10013','10028','10014','10023','10021','10023','10011','10019','10021','10023','10011','10036','10016','10011','10014','10028','10021','10019','10028','10013','10023','10013','10013','10036','10011','10014','10014','14304','11769','11572','13421','14534','11803','11050','14624','11570','11575','10573','11963','11780','12866','12866','10583','10583','10583','13152','11787','11787','11968','10312','10306','10309','10306','11104','13208','10707','10707','14580','14224','11977','11978','14221','11797','11797','44212','45459','45244','45245','45242','45211','45245','43214','43240','45833','43017','44035','45013','45429','45429','44902','45044','44442','44070','44130','43551','45662','44870','45503','44224','44087','45895','45069','43081','44512','73401','74023','74701','73013','73034','73701','74401','73069','73069','73116','73120','73120','73120','73130','73116','73118','74804','74464','74120','74137','74114','73099','97005','97701','97333','97401','97031','97035','97504','97267','97214','97212','97205','97209','16602','19002','19003','18017','15017','17013','19026','16509','19341','19038','17331','19040','18201','17036','19046','19348','17603','19047','19446','17043','15317','19072','16101','17557','18940','19073','19401','19301','18944','19107','19147','19093','19107','19103','19103','19138','19103','15210','15767','19606','17701','17702','16801','19053','19382','15090','15131','17404','29803','29206','29205','29206','29206','29501','29601','29605','29607','29550','29063','29579','29732','29483','29150','29150','57401','57401','57701','57105','37701','37408','38506','38018','37064','37064','37072','37343','37659','37923','38117','38117','37215','37215','37212','37379','37388','76010','78749','78746','78731','78757','78705','78746','77520','77706','77706','78611','77304','78412','77429','75231','75202','75206','75229','75209','75228','75201','76205','79903','79928','79912','79912','75839','75028','76244','76116','78624','77546','75034','75040','78557','77057','77069','77005','77025','77006','77098','77081','77056','77005','77056','77338','77450','76543','77566','78041','78041','75077','75901','78501','75069','78504','78501','75069','79707','79707','77627','78130','79761','77630','75024','75093','75023','78665','76904','78258','78218','78212','75090','76092','77373','76502','76502','75501','77901','77904','77598','76308','76308','84003','84010','84321','84403','84098','84601','84604','84604','84108','84102','84109','84092','84070','84092','84094','84770','84129','22301','24060','22902','22902','22903','23320','23321','23834','24540','24551','22405','22801','20170','20110','20118','23112','23606','23229','23221','23221','23455','23451','98802','98020','98003','98249','98087','98273','98277','98516','98501','98368','98370','99163','98112','98188','98104','99202','98902','54911','53916','53005','53115','54301','53029','54603','53704','53716','53719','53562','53225','53211','53066','53405','53959','53589','54660','25302','25443','26062','82601','83001','83001','02482','70560','11788','22031','07020','07647','84020','14420','33175','15401','08648','66604','85202','02481','44124','78759','10512','38801','77339','68046','82001','78734','76017','70737','10075','74820','17566','07043','70360','70506','83301','07024','70438','07072','70062','56425','60563','15301','70502','91108','70345','06830','38363','70058','32223','32216','50131','01027','02804','07666','78552','70403','07039','79109','08221','11205','73170','29306','91761','37027','46808','55305','55125','84025','07940','90069','00983','76541','15668','95521','38133','95128','07631','90025','72758','90265','19604','06824','00659','30223','39564','02347','19426','06001','60010','46635','08742','79605','56560','11040','32606','08690','07930','79424','80109','06850','08053','67208','07960','07632','02721','01803','14618','32065','12603','91206','78736','02906','46952','02747','85206','05701','99503','47303','29708','83460','92395','01201','94040','91942','94401','92054','70002','07670','07481','08628','30060','98105','08736','02809','01230','07030','07624','02889','07726','08558','98225','01824','07450','19808','12508','19560','33618','50021','02338','06840','02062','46143','79603','32119','33426','02840','24179','84057','32955','60914','70458','45322','02140','30126','93401','70071','21015','79705','76110','68114','17361','82414','13413','92677','01742','04938','06040','21801','73501','37076','48152','32712','60014','34470','78645','03246','46383','54913','01420','23185','06512','30269','92612','15905','06109','89445','07646','26505','03060','15601','43055','02760','02382','02780','02460','02601','06517','08869','01757','06518','33165','98033','27284','75237','03102','77089','48187','04347','44718','07677','08816','06062','03801','06820','07834','32504','32541','08234','78232','78230','78681','70043','07642','33432','47905','08753','94598','00725','90403','78613','54650','07006','90277','77070','01056','04101','21701','72212','27609','02169','78704','40701','34787','08003','00926','32413','10883','01867','06804','06716','30582','08701','75205','07442','01220','07866','08540','08822','07751','07652','06460','06877','89502','02375','73044','91403','87505','49503','93711','08402','46062','40220','02118','52240','06897','06488','02917','78216','02116','05495','39305','02360','91741','06880','32405','25701','70301','02820','02633','29409','02114','08002','19342','92657','06790','55435','46803','03784','01960','43606','94107','07723','83201','02467','57108','60435','80524','06902','20707','95123','07675','38804','08542','07731','02474','33434','10025','66209','07651','05451','03301','71106','01907','07701','07090','10010','75067','06468','44310','28387','05401','96826','01085','04843','75074','00921','00968','00680','00731','02139','32502','03079','07042','05452','29407','21740','03842','37203','01501','06870'));
	sort($all, SORT_STRING);
	sort($db, SORT_STRING);
	echo var_export($db);
	exit;
	include("../lib/cfg_Config.php");
	include("../lib/adodb/adodb.inc.php");
	include("../lib/act_OpenDB.php");

	$upcs = array('8857014111268','8857014111442','8857014117444','8857014117451','8857014117468','8857014117475','8857014117482','8857014117499','8857014117505','8857014117512','8857014117529','8857014117536','8857014117543','8857014117550','8857014117567','8857014117574','8857014449118','8857014449125','8857014449132','8857014449149','8857014449156','8857014449163','8857014449170','8857014449187','8857014449194','8857014449200','8857014449217','8857014449224','8857014449231','8857014449248','8857014974092','8857014974108','8857014974115','8857014974122','8857014998395','8857015099374','8857015189525','8857015436490','8857015436506','8857015436513','8857015436520','8857015436537','8857015436544','8857015436551','8857015436568','8857015436575','8857015436582','8857015436599','8857015436605','8857015436612','8857015531577','8857015531584','8857015531591','8857015531607','8857015531614','8857015531621','8857015531638','8857015531645','8857015531652','8857015531669','8857015531676','8857015531683','8857015531737','8857015531744','8857015531751','8857015531768','8857015531775','8857015531782','8857015531799','8857015531805','8857015531812','8857015531829','8857015531836','8857015531843','8857015531850');
	
	$fp = fopen($config['path'].'script/ean_upc.csv', 'r');
	$csv = array();
	while(($data = fgetcsv($fp, 0, "\t")) !== false)
	{
		$data = array_map('trim', $data);
		if(in_array($data[5], $upcs))
			$csv[] = implode("\t", $data);
	}
	fclose($fp);
	file_put_contents($config['path'].'script/ean_upc_2.csv', implode("\r\n", $csv));
?>